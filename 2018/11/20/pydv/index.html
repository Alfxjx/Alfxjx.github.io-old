<!DOCTYPE html>
<html lang="zh-CN">










<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon.png">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no" name="viewport">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="Blog">
    <meta name="author" content="Xu Jianxiang">
    <meta name="keywords" content="">
    <title>python数据可视化笔记 ~ Alfred&#39;s</title>
    <link rel="stylesheet" href="/css/Material_Icons.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/main.css">
    
        <link rel="stylesheet" href="/css/post.css">
        
            <link rel="stylesheet" href="/css/Prettify/github.min.css">
        
    
</head>

<body class=" sidebar-collapse">
<nav class="navbar navbar-transparent navbar-color-on-scroll fixed-top navbar-expand-lg" color-on-scroll="100" id="sectionsNav">
    <div class="container">
        <div class="navbar-translate">
            <a class="navbar-brand" href="/">
                Alfred&#39;s</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="sr-only">Toggle navigation</span>
                <span class="navbar-toggler-icon"></span>
                <span class="navbar-toggler-icon"></span>
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ml-auto">
                    
                        
                            <li class="nav-item">
                                <a class="nav-link" href="/archives/">
                                    archives
                                </a>
                            </li>
                        
                            <li class="nav-item">
                                <a class="nav-link" href="/about/">
                                    about
                                </a>
                            </li>
                        
                    
                    
                        
                            <li class="nav-item">
                                <a class="nav-link" rel="tooltip" title="" data-placement="bottom" href="https://github.com/" target="_blank" data-original-title="See me here">
                                    <i class="fa fa-github"></i>
                                </a>
                            </li>
                        
                            <li class="nav-item">
                                <a class="nav-link" rel="tooltip" title="" data-placement="bottom" href="https://twitter.com/" target="_blank" data-original-title="See me here">
                                    <i class="fa fa-twitter"></i>
                                </a>
                            </li>
                        
                    
                </ul>
            </div>
    </div>
</nav>
    
  <div class="page-header header-filter" data-parallax="false" style="background-image: url('/img/post-banner.jpg'); height: 75vh;">
    
      <div class="container">
        <h1 class="title text-center post_title">python数据可视化笔记</h1>
        <p class="text-center"><b>Tuesday, November 20th 2018, 3:58 pm</b></p>
      </div>
    
  </div>

  
  
  
    <div class="row" style="margin: 0 0 0; z-index: 999;">
  <div class="col-md-8 offset-md-1">
    <div class="main main-raised">
      <div class="container">
        <div class="section">
          <div class="post_content">
              <h2 id="Numpy"><a href="#Numpy" class="headerlink" title="Numpy"></a>Numpy</h2><pre><code class="python">import numpy as np
a = np.arrange(10)
a?
#IPython环境中，可以用? 显示数据的具体信息。
</code></pre>
<pre><code class="python">%run demo.py
#执行（在空的命名空间执行） demo.py
%reset 
%who
#查看与删除变量
</code></pre>
<ul>
<li>一维数据：列表、集合</li>
<li>二维数据：列表</li>
<li>高维数据：字典数据表示，json等</li>
</ul>
<h3 id="Numpy-n维数组对象—ndarray"><a href="#Numpy-n维数组对象—ndarray" class="headerlink" title="Numpy n维数组对象—ndarray"></a><strong>Numpy</strong> n维数组对象—ndarray</h3><pre><code class="python">import numpy as np
def npsum():
    a = np.array([0,1,2])
    b = np.array([8,7,6])
    npsum = a**2 + b**3
    return npsum
# 数组对应元素幂相加
</code></pre>
<ul>
<li>轴axis（数据的维度）</li>
<li>秩rank（维度的数量）</li>
</ul>
<h3 id="ndarray数组创建方法"><a href="#ndarray数组创建方法" class="headerlink" title="ndarray数组创建方法"></a><strong>ndarray数组创建方法</strong></h3><pre><code class="python">x = np.array([1,2],(2,3))
allone = np.ones((2,3),dtype = int32)
allzeros = np.zeros(shape)
y = np.eye(n)
# 单位对角阵

x = np.arange(shape)
#顺序生成数组

np.ones_like(a) 
# 形状与a相同的全1数组

np.linespace(1,10,4,endpoint = false)
# 浮点数，从1到10， 总共四个，endpoint表示生成的数是否包括10

np.concatenate() 
#数组合并

.reshape(shape)#不改变原数组
.resize(shape)#改变
.astype(shape)#类型转变，必创建新数组
</code></pre>
<h3 id="数组的索引和切片"><a href="#数组的索引和切片" class="headerlink" title="数组的索引和切片"></a><strong>数组的索引和切片</strong></h3><pre><code class="python">#索引
a = np.arange(24).reshape((2,3,4))
a
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]],

       [[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]])
a[1,2,3] #23
#第一个维度的第1个，第二维度的第2个，第三维度的第三个
#从0开始

a[-1,-2,-3]#17
#负数从右向左，-1就是右边第一个

#切片
a[:,1,-3] #array([ 5, 17])
#不考虑第一维度，只考虑第二维度是1，和第三维度是-3的。
a[:,:,::2] # 第三维度步长跳跃切片
array([[[ 0,  2],
        [ 4,  6],
        [ 8, 10]],

       [[12, 14],
        [16, 18],
        [20, 22]]])
</code></pre>
<h3 id="ndarray数组运算"><a href="#ndarray数组运算" class="headerlink" title="ndarray数组运算"></a><strong>ndarray数组运算</strong></h3><pre><code class="python">#数组与标量计算
a = np.arange(24).reshape((2,3,4))
a.mean() #平均值
a = a/a.mean()
a
array([[[0.        , 0.08695652, 0.17391304, 0.26086957],
        [0.34782609, 0.43478261, 0.52173913, 0.60869565],
        [0.69565217, 0.7826087 , 0.86956522, 0.95652174]],

       [[1.04347826, 1.13043478, 1.2173913 , 1.30434783],
        [1.39130435, 1.47826087, 1.56521739, 1.65217391],
        [1.73913043, 1.82608696, 1.91304348, 2.        ]]])
</code></pre>
<p><em>注意数组是否真实改变</em></p>
<p>numpy 函数是对对应元素进行计算</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a><strong>小结</strong></h3><p><img src="/2018/11/20/pydv/np-week1.JPG" alt="np-week1"></p>
<h3 id="csv文件：存取一维、二维数组"><a href="#csv文件：存取一维、二维数组" class="headerlink" title="csv文件：存取一维、二维数组"></a><strong>csv文件：存取一维、二维数组</strong></h3><pre><code class="Python">np.savetxt(frame, array,fmt = &#39;%18e&#39;,delimiter=None)#读取
np.loadtxt(frame, dtype=float,delimiter=None,unpack=false)#写入
#&#39;%18e&#39; 18位小数的浮点数
a = np.arange(12).reshape(3,4)
np.savetxt(&#39;a.csv&#39;,a,fmt=&#39;%d&#39;,delimiter=&#39;,&#39;)
</code></pre>
<pre><code class="Python">.tofile(frame,sep=&quot;,&quot;,format=&#39;%s&#39;)#存
.fromfile(frame,dtype=float,count=-1,sep=&#39;&#39;)#取 
#sep为空，存取的是二进制
a = np.arange(100).reshape(5,10,2)
a.tofile(&quot;b.dat&quot;,sep=&quot;,&quot;,format=&#39;%d&#39;)
</code></pre>
<p>这种方法在存取过程需要知道原始数据的信息，需要新建一个元数据文件，存原始数据的维度信息。</p>
<pre><code class="Python">np.save(frame, array)
np.load(frame, array)
np.savez(frame, array)# zip
#frame = .npy /.npz 格式
</code></pre>
<h3 id="随机数函数"><a href="#随机数函数" class="headerlink" title="随机数函数"></a><strong>随机数函数</strong></h3><pre><code class="Python">np.random.randn(d0,d1,....,dn) # 有n 表示正态分布
</code></pre>
<p><img src="/2018/11/20/pydv/seed.JPG" alt="seed"></p>
<p><em>seed函数，每次生成相同的随机数组。</em></p>
<pre><code class="Python">&gt;&gt;&gt; a = np.random.randint(100,200,(3,4))
&gt;&gt;&gt; np.random.shuffle(a)
&gt;&gt;&gt; np.random.permutation(a) #a 不变
&gt;&gt;&gt; np.random.choice(a,size,replace=false,p=b/np.sum(b))
</code></pre>
<pre><code class="python">uniform(low,high,size) 
#产生具有均匀分布的数组,low起始值,high结束值,size形状
normal(loc,scale,size)
#产生具有正态分布的数组,loc均值,scale标准差,size形状
poisson(lam,size)
#产生具有泊松分布的数组,lam随机事件发生率,size形状
</code></pre>
<h3 id="统计函数"><a href="#统计函数" class="headerlink" title="统计函数"></a><strong>统计函数</strong></h3><pre><code class="python">std(a, axis=None) 
#根据给定轴axis计算数组a相关元素的标准差
var(a, axis=None)
#根据给定轴axis计算数组a相关元素的方差
</code></pre>
<h3 id="梯度函数"><a href="#梯度函数" class="headerlink" title="梯度函数"></a><strong>梯度函数</strong></h3><pre><code class="python">&gt;&gt;&gt; a=np.random.randint(0,20,(5))
&gt;&gt;&gt; a
array([18, 10, 18,  9, 16])
&gt;&gt;&gt; np.gradient(a)
array([-8. ,  0. , -0.5, -1. ,  7. ])
&gt;&gt;&gt; c= np.random.randint(0,50,(3,5))

&gt;&gt;&gt; c #二维数组？？？？
array([[11, 44, 10, 38, 20],
       [46, 33, 19, 13, 33],
       [ 7, 32, 22, 19, 38]])
&gt;&gt;&gt; np.gradient(c)
[array([[ 35. , -11. ,   9. , -25. ,  13. ],
       [ -2. ,  -6. ,   6. ,  -9.5,   9. ],
       [-39. ,  -1. ,   3. ,   6. ,   5. ]]), array([[ 33. ,  -0.5,  -3. ,   5. , -18. ],
       [-13. , -13.5, -10. ,   7. ,  20. ],
       [ 25. ,   7.5,  -6.5,   8. ,  19. ]])]
</code></pre>
<h2 id="Matplotlib"><a href="#Matplotlib" class="headerlink" title="Matplotlib"></a>Matplotlib</h2><pre><code class="python">import matplotlib.pyplot as plt
plt.plot((xList,)yList（， ‘—-’）)
plt. show()
plt.savefig(‘test’,dpi=300) #.png
plt.axis(xStart,xEnd,yStart,yEnd)#图的坐标轴范围
plt.subplot(nrows,ncols,plot_number)#横轴数，纵轴数，绘图区域序号
</code></pre>
<h3 id="plot-函数"><a href="#plot-函数" class="headerlink" title="plot()函数"></a>plot()函数</h3><pre><code class="python">plt.plot(x,y,format_string,**kwargs)
#可绘制多条曲线，此时x是必须的
#format_string 格式：颜色/风格/标记字符
</code></pre>
<p>format_string<br>颜色：’b’ 蓝色‘w’白色 ’#444’<br>风格：’-‘/’—‘/’-.‘ etc.<br>标记：’.’/‘,’/‘o’/‘v’/‘^’/‘&gt;’/‘&lt;‘/‘1’ etc.</p>
<pre><code class="python">#example
a = np.arange(10)
plt.plot(a,a*1.5,’go-‘,a,a*2.5,’r-‘) # g means green
#markerfacecolor 只改变标记的颜色，使得线与标记颜色不一样
</code></pre>
<h3 id="plot-中文显示"><a href="#plot-中文显示" class="headerlink" title="plot() 中文显示"></a>plot() 中文显示</h3><pre><code class="python">import matplotlib
matplotlib.rcParams[‘font.family’]=‘SImHei’#黑体
#font.family字体
#font_size大小
#font.style斜体，加粗等风格
plt.xlabel(‘横轴：时间’)

#只改变输出的字体，在有中文输出的位置，加入fontproperties
plt.xlabel(‘横轴：时间’,fontproperties=‘SimHei’,font.size = 20)
</code></pre>
<h3 id="pyplot文本显示方法"><a href="#pyplot文本显示方法" class="headerlink" title="pyplot文本显示方法"></a>pyplot文本显示方法</h3><pre><code class="python">plt.title(r’余弦函数实例 $ y = cos(2\pi x) $’,fontproperties = ‘SimHei’,font.size = 20)
#  $ $ 属于Latex表示方法
plt.xlabel()
plt.text(2, 1, r’$\mu=100’ ,font.size = 10)#任意位置文本
plt.anotate(‘this is ‘, xy=(2,1), xytext=(3,1.5), arrowprops = dict(facecolor = ‘black’,shrink = 0.1, width = 3))
#带箭头的注释 shrink 表示箭头指向的缩进
</code></pre>
<h3 id="子绘图区域设计方法"><a href="#子绘图区域设计方法" class="headerlink" title="子绘图区域设计方法"></a>子绘图区域设计方法</h3><pre><code class="python">plt.subplot2grid((3,3),(1,0),colspan=2)
# 区域分为3x3的区域，选中第二行第一个，长度为2个格子
#colspan/rowspan
import matplotlib.gridspec as gridspec
gs = grispec.GridSpec(3,3)
ax1 = plt.subplot(gs[0,:])
</code></pre>
<h3 id="16种常用pyplot函数方法"><a href="#16种常用pyplot函数方法" class="headerlink" title="16种常用pyplot函数方法"></a>16种常用pyplot函数方法</h3><pre><code class="python">plt.plot()
plt.bar()
plt.polar()
plt.pie()
plt.psd()#功率谱密度图
plt.scatter()#散点图
plt.hist()#直方图
plt.plot_date()#图表日期
</code></pre>
<h3 id="饼图"><a href="#饼图" class="headerlink" title="饼图"></a>饼图</h3><pre><code class="python">import matplotlib.pyplot as plt
labels = &#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;
#尺寸
sizes = [15,30,45,10]
#突出
explode = (0,0.1,0,0)
#auotopct 百分数显示方式
#startangle 起始角度
plt.pie(sizes,explode = explode,labels = labels,autopct = &#39;%1.1f%%&#39;,shadow = False,startangle = 90)
#变成正圆---todo
plt.axis(&#39;equal&#39;)
plt.show()
</code></pre>
<p><img src="/2018/11/20/pydv/pieEqual.png" alt="pieEqual"></p>
<h3 id="直方图"><a href="#直方图" class="headerlink" title="直方图"></a>直方图</h3><pre><code class="python">np.random.seed(0)
mu,sigma = 100,20 # 均值和标准差
a = np.random.normal(mu, sigma, size=100)
#bin:直方图个数
# normed =0 显示个数 =1归一化
# alpha尺寸比例
plt.hist(a,bin=10,normed=1,histtype=&#39;stepfilled&#39;, facecolor=&#39;b&#39;, alpha = 0.75)
plt.title(&#39;Histogram&#39;)
</code></pre>
<p><img src="/2018/11/20/pydv/histogram.png" alt="histograml"></p>
<h3 id="极坐标图"><a href="#极坐标图" class="headerlink" title="极坐标图"></a>极坐标图</h3><p>面向对象的绘制方法</p>
<pre><code class="python">import numpy as np
import matplotlib.pyplot as plt
N=10
theta=np.linspace(0.0,2*np.pi,N,endpoint=False)
radii=10*np.random.rand(N)
width=np.pi/2*np.random.rand(N)
ax = plt.subplot(111,projection=&#39;polar&#39;)
bars = ax.bar(theta,radii,width,bottom=0.0)
for r, bar in zip(radii,bars):
    bar.set_facecolor(plt.cm.viridis(r/10.))
    bar.set_alpha(0.5)
</code></pre>
<p><img src="/2018/11/20/pydv/polar.png" alt="polar"></p>
<h3 id="散点图"><a href="#散点图" class="headerlink" title="散点图"></a>散点图</h3><pre><code class="python">import numpy as np
import matplotlib.pyplot as plt
#建立一个fig对象，建立一个axis对象。
fig,ax = plt.subplots()
ax.plot(10*np.random.randn(100), 10*np.random.randn(100),&#39;o&#39;)
ax.set_title(&#39;Simple Scatter&#39;)
plt.show()
</code></pre>
<p><img src="/2018/11/20/pydv/simpleScatter.png" alt="simple scatterl"></p>
<h3 id="引力波绘制"><a href="#引力波绘制" class="headerlink" title="引力波绘制"></a>引力波绘制</h3><pre><code class="python">import numpy as np
import matplotlib.pyplot as plt
from scipy.io import wavfile

rate_h, hstrain= wavfile.read(r&quot;F:\\code\\c\\DataScience\\pyDV\\grawave\\H1_Strain.wav&quot;,&quot;rb&quot;)
rate_l, lstrain= wavfile.read(r&quot;F:\\code\\c\\DataScience\\pyDV\\grawave\\L1_Strain.wav&quot;,&quot;rb&quot;)
#reftime, ref_H1 = np.genfromtxt(&#39;GW150914_4_NR_waveform_template.txt&#39;).transpose()
reftime, ref_H1 = np.genfromtxt(&#39;F:\\code\\c\\DataScience\\pyDV\\grawave\\wf_template.txt&#39;).transpose() #使用python123.io下载文件

htime_interval = 1/rate_h
ltime_interval = 1/rate_l
fig = plt.figure(figsize=(12, 6))

# 丢失信号起始点
htime_len = hstrain.shape[0]/rate_h
htime = np.arange(-htime_len/2, htime_len/2 , htime_interval)
plth = fig.add_subplot(221)
plth.plot(htime, hstrain, &#39;y&#39;)
plth.set_xlabel(&#39;Time (seconds)&#39;)
plth.set_ylabel(&#39;H1 Strain&#39;)
plth.set_title(&#39;H1 Strain&#39;)

ltime_len = lstrain.shape[0]/rate_l
ltime = np.arange(-ltime_len/2, ltime_len/2 , ltime_interval)
pltl = fig.add_subplot(222)
pltl.plot(ltime, lstrain, &#39;g&#39;)
pltl.set_xlabel(&#39;Time (seconds)&#39;)
pltl.set_ylabel(&#39;L1 Strain&#39;)
pltl.set_title(&#39;L1 Strain&#39;)

pltref = fig.add_subplot(212)
pltref.plot(reftime, ref_H1)
pltref.set_xlabel(&#39;Time (seconds)&#39;)
pltref.set_ylabel(&#39;Template Strain&#39;)
pltref.set_title(&#39;Template&#39;)
fig.tight_layout()

plt.savefig(&quot;F:\\code\\c\\DataScience\\pyDV\\pic\\Gravitational_Waves_Original.png&quot;)
plt.show()
#plt.close(fig)
</code></pre>
<p><img src="/2018/11/20/pydv/grawave.png" alt="grawave"></p>
<h2 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h2><ul>
<li>易操作的数据类型<code>Series &amp; DataFrame</code></li>
<li>分析工具</li>
</ul>
<p><code>import pandas as pd</code> pandas 与<code>NUMPY</code>关系紧密</p>
<h3 id="Series-类型"><a href="#Series-类型" class="headerlink" title="Series 类型"></a>Series 类型</h3><p>一组数据加数据索引的显式关系</p>
<p><code>index_0 =&gt; data_a</code></p>
<pre><code class="python">import pandas as pd

a = pd.Series([9,8,7,6]) #default 0-&gt;9

a = pd.Series([9,8,7,6], index=[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;])
Out[5]: 
a    9    b    8    c    7    d    6
dtype: int64
#标量创建 a/b/c-&gt; 25
pd.Series(25, index=[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;])
#字典创建 
pd.Series({&#39;a&#39;:9,&#39;b&#39;:8})
pd.Series({&#39;a&#39;:9,&#39;b&#39;:8}, index=[&#39;b&#39;,&#39;a&#39;,&#39;c&#39;])
# c-&gt; NaN
</code></pre>

          </div>
          <br><br>
          <div>
              <p>
                       
                      <span class="badge badge-default">#&nbsp;Python</span>
                      &nbsp;
                      
              </p>
          </div>
        </div>
      </div>  
    </div>
  </div>
  <!-- TOC -->
  
  <div id="toc">
    <p class="toc-title"><i class="material-icons" style="vertical-align:middle">toc</i>Toc:</p> 
    <div id="tocbot"></div>
  </div>

</div>


<br>
<!-- Comments -->
<div class="comments" id="comments">

    
    <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    <script>               
        var disqus_shortname = '';
        var disqus_config = function () {
            this.page.url = 'http://yoursite.com/2018/11/20/pydv/'; 
            this.page.identifier = '/2018/11/20/pydv/';
        };
        (function() { 
            var d = document, s = d.createElement('script');
            s.type = 'text/javascript';
            s.src = '//'+disqus_shortname+'.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>                                
</div>

</div>
  

<footer class="footer footer-default">
        <div class="container">
          <div class="float-left" style="padding: 15px 0;">
              <b>一日看尽长安花</b>
          </div>
          <div class="copyright float-right">
            &copy;
            <script>
              document.write(new Date().getFullYear())
            </script>&nbsp;<a href="https://hexo.io/zh-cn/" target="_blank">HEXO</a>&nbsp;<i class="material-icons">favorite_border</i>
            <a href="https://github.com/invom/Material-T" target="_blank">Material-T</a>
          </div>
        </div>
</footer>
      <!--   Core JS Files   -->
      <script src="/js/core/jquery.min.js?v=3.2.1"></script>
      <script src="/js/main.js"></script>
      <script src="/js/core/popper.min.js"></script>
      <script src="/js/core/bootstrap-material-design.min.js"></script>
      <script src="/js/plugins/moment.min.js"></script>
      <!-- Control Center for Material Kit: parallax effects, scripts for the example pages etc -->
      <script src="/js/material-kit.min.js?v=2.0.5"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
        <script src="/js/post.js"></script>
        <script src="/js/plugins/prettify.js"></script>
        <script>
            $(document).ready(function(){
                $('pre').addClass('prettyprint linenums');
                prettyPrint();
            })
        </script>
      
</body>
</html>