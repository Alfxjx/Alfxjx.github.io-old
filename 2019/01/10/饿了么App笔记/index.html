<!DOCTYPE html>
<html lang="zh-CN">










<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon.png">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no" name="viewport">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="Blog">
    <meta name="author" content="Xu Jianxiang">
    <meta name="keywords" content="">
    <title>Vue.js 2.5饿了么移动App笔记 ~ Alfred&#39;s</title>
    <link rel="stylesheet" href="/css/Material_Icons.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/main.css">
    
        <link rel="stylesheet" href="/css/post.css">
        
            <link rel="stylesheet" href="/css/Prettify/github.min.css">
        
    
</head>

<body class=" sidebar-collapse">
<nav class="navbar navbar-transparent navbar-color-on-scroll fixed-top navbar-expand-lg" color-on-scroll="100" id="sectionsNav">
    <div class="container">
        <div class="navbar-translate">
            <a class="navbar-brand" href="/">
                Alfred&#39;s</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="sr-only">Toggle navigation</span>
                <span class="navbar-toggler-icon"></span>
                <span class="navbar-toggler-icon"></span>
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ml-auto">
                    
                        
                            <li class="nav-item">
                                <a class="nav-link" href="/archives/">
                                    archives
                                </a>
                            </li>
                        
                            <li class="nav-item">
                                <a class="nav-link" href="/about/">
                                    about
                                </a>
                            </li>
                        
                    
                    
                        
                            <li class="nav-item">
                                <a class="nav-link" rel="tooltip" title="" data-placement="bottom" href="https://github.com/" target="_blank" data-original-title="See me here">
                                    <i class="fa fa-github"></i>
                                </a>
                            </li>
                        
                            <li class="nav-item">
                                <a class="nav-link" rel="tooltip" title="" data-placement="bottom" href="https://twitter.com/" target="_blank" data-original-title="See me here">
                                    <i class="fa fa-twitter"></i>
                                </a>
                            </li>
                        
                    
                </ul>
            </div>
    </div>
</nav>
    
  <div class="page-header header-filter" data-parallax="false" style="background-image: url('/img/post-banner.jpg'); height: 75vh;">
    
      <div class="container">
        <h1 class="title text-center post_title">Vue.js 2.5饿了么移动App笔记</h1>
        <p class="text-center"><b>Thursday, January 10th 2019, 4:04 pm</b></p>
      </div>
    
  </div>

  
  
  
    <div class="row" style="margin: 0 0 0; z-index: 999;">
  <div class="col-md-8 offset-md-1">
    <div class="main main-raised">
      <div class="container">
        <div class="section">
          <div class="post_content">
              <p><strong>注意</strong> 本文主要记录的是课程中需要改动的部分，其他的还是看视频吧。需要Vue&amp;React视频的可以联系我。</p>
<a id="more"></a>
<h3 id="icon"><a href="#icon" class="headerlink" title="icon"></a>icon</h3><p>SVG格式转换 <a href="https://icomoon.io/app/#/select" target="_blank" rel="noopener">icomoon</a></p>
<pre><code>import icons
generate fonts
preference
download
</code></pre><p>主要使用的是<code>fonts</code>以及<code>style.css</code></p>
<p>将<code>fonts</code>放在<code>common/fonts</code>,<code>style.css-&gt;icon.styl</code>,并把css里面的{};都删了</p>
<h3 id="Mock数据"><a href="#Mock数据" class="headerlink" title="Mock数据"></a>Mock数据</h3><p><code>data.json</code>拷贝到根目录下</p>
<p>Vue 2.5 /prod.server.js</p>
<pre><code class="javascript">// Mock数据
const express = require(&#39;express&#39;)
const app = express()
const appData = require(&#39;../data.json&#39;)
const seller = appData.seller
const goods = appData.goods
const ratings = appData.ratings


apiRoutes.get(&#39;/seller&#39;, function (req, res) {
    res.json({
        errno: 0,
        data: seller
    });
});
//注意最后登录的网址localhost:8080/api/seller
</code></pre>
<h3 id="Webstorm默认模板"><a href="#Webstorm默认模板" class="headerlink" title="Webstorm默认模板"></a>Webstorm默认模板</h3><p>setting-搜索 templates</p>
<pre><code class="vue">&lt;script&gt;
export default {
name: &quot;${COMPONENT_NAME}&quot;
}
&lt;/script type=&quot;text/ecmascript-6&quot;&gt;

&lt;style lang=&quot;stylus&quot; rel=&quot;stylesheet/stylus&quot;&gt;

&lt;/style&gt;
</code></pre>
<h3 id="reset-css"><a href="#reset-css" class="headerlink" title="reset.css"></a>reset.css</h3><p>覆盖原始元素的样式</p>
<pre><code>Eric Meyer&#39;s Reset CSS v2.0 (http://meyerweb.com/eric/tools/css/reset/)
</code></pre><h3 id="代码格式化"><a href="#代码格式化" class="headerlink" title="代码格式化"></a>代码格式化</h3><p><code>ctrl+alt+L</code></p>
<h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3><p>移动端适配</p>
<pre><code class="html">&lt;meta name=&quot;viewport&quot;
        content=&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;static/css/reset.css&quot;&gt;
</code></pre>
<h3 id="Vue组件-amp-Router"><a href="#Vue组件-amp-Router" class="headerlink" title="Vue组件&amp;Router"></a>Vue组件&amp;Router</h3><p><code>app.vue</code>中导入（<code>import</code>）组件，再<code>export</code> 到自己的<code>&lt;template&gt;</code>里面。</p>
<p>路由需要在<code>router/index.js</code>中引入路由，定义对应的路径，接着在<code>App.vue</code>中：</p>
<pre><code>&lt;div class=&quot;tab-item&quot;&gt;
        &lt;router-link to=&quot;/seller&quot;&gt;商家&lt;/router-link&gt;
&lt;/div&gt;
&lt;router-view&gt;&lt;/router-view&gt;
</code></pre><p>组织</p>
<h3 id="a-标签-按钮"><a href="#a-标签-按钮" class="headerlink" title="a 标签 按钮"></a>a 标签 按钮</h3><pre><code>&amp; &gt; a
        display: block
</code></pre><p><strong>疑问</strong> 现在给<code>linkActiveClass</code> 添加别名是在哪里</p>
<h3 id="1px问题"><a href="#1px问题" class="headerlink" title="1px问题"></a>1px问题</h3><pre><code class="css">border-1px($color)
  position relative
  &amp;:after
    display block
    position absolute
    left 0
    bottom 0
    width 100%
    border-top 1px solid $color
    content &#39;&#39;

</code></pre>
<p>按此先设置，接着对不同的屏幕尺寸进行检查，设置一个<code>.border-1px</code>，进行缩放：</p>
<pre><code>@media (-webkit-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)
  .border-1px
    &amp;::after
      -webkit-transform scaleY(0.7)
      transform scaleY(0.7)
@media (-webkit-min-device-pixel-ratio: 2),(min-device-pixel-ratio: 2)
  .border-1px
    &amp;::after
      -webkit-transform scaleY(0.5)
      transform scaleY(0.5)

</code></pre><h3 id="vue-resource"><a href="#vue-resource" class="headerlink" title="vue-resource"></a>vue-resource</h3><p><code>main.js</code>引入：</p>
<pre><code>import VueResource from &#39;vue-resource&#39;
Vue.use(VueResource)
</code></pre><p><code>App.vue</code>使用created函数：</p>
<pre><code class="javascript">created () {
      this.$http.get(&#39;/api/seller&#39;).then((res) =&gt; {
        res = res.body
        if (res.errno === ERR_OK) {
          this.seller = res.data
          console.log(this.seller)
        }
      })
    },
</code></pre>
<p>改变的是：</p>
<pre><code class="html">&lt;v-header :seller=&quot;seller&quot;&gt;&lt;/v-header&gt;
</code></pre>
<p>于是<code>header.vue</code>中：</p>
<pre><code class="javascript">export default {
    props: {
      seller: {
        type: Object
      }
    }
  }
</code></pre>
<p>使用<code>props</code>接受这个信息</p>
<h3 id="自动折行的样式"><a href="#自动折行的样式" class="headerlink" title="自动折行的样式"></a>自动折行的样式</h3><pre><code>white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
</code></pre><h3 id="v-show-amp-click-”show-”"><a href="#v-show-amp-click-”show-”" class="headerlink" title="v-show &amp; @click=”show()”"></a>v-show &amp; @click=”show()”</h3><pre><code class="vue">&lt;div class=&quot;detail&quot; v-show=&quot;detailShow&quot;&gt;
&lt;div class=&quot;bulletin-wrapper&quot; @click=&quot;showDetail&quot;&gt;&lt;/div&gt;

&lt;script&gt;
data () {
      return {
        detailShow: false
      }
    },
methods: {
      showDetail () {
        this.detailShow = true
      }
    }
&lt;/script&gt;
</code></pre>
<h3 id="Sticky-Footer样式"><a href="#Sticky-Footer样式" class="headerlink" title="Sticky Footer样式"></a><a href="https://www.cnblogs.com/shicongbuct/p/6487122.html" target="_blank" rel="noopener">Sticky Footer样式</a></h3><pre><code>&lt;div class=&quot;detail-wrapper clearfix&quot;&gt;
    &lt;div class=&quot;detail-main&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;detail-close&quot;&gt;
    &lt;i class=&quot;icon-close&quot;&gt;&lt;/i&gt;
&lt;/div&gt;
</code></pre><pre><code class="stylus">.clearfix
  display inline-block
  &amp;:after
    content &quot;.&quot;
    display block
    height 0
    line-height 0
    clear both
    visibility hidden

.detail-wrapper
        min-height 100%
        .detail-main
          margin-top 64px
          //important
          padding-bottom 64px
      .detail-close
        position relative
        width 32px
        height 32px
        //important
        margin -64px auto 0 auto
        clear both
        font-size 32px    

</code></pre>
<h3 id="向下去整"><a href="#向下去整" class="headerlink" title="向下去整"></a>向下去整</h3><pre><code class="javascript">Math.floor(this.score * 2) / 2
</code></pre>
<h3 id="组件抽象"><a href="#组件抽象" class="headerlink" title="组件抽象"></a>组件抽象</h3><p>见<code>star/star.vue</code></p>
<p><strong>我在抽象<code>line-title</code>时遇见的一个问题</strong></p>
<p>就是<code>:title=&quot;bonus&quot;</code>，然后父组件里面添加数据<code>bonus:&#39;优惠信息&#39;</code>，接着子组件的<code>Vue.js 2.5饿了么移动App笔记</code>才会显示，要是不添加<code>bonus:&#39;优惠信息&#39;</code>，而是直接<code>:title=&quot;优惠信息&quot;</code>，就显示不出来了。</p>
<pre><code class="vue">//不显示
&lt;lineTitle :title=&quot;优惠信息&quot;&gt;&lt;/lineTitle&gt;
//正确
&lt;lineTitle :title=&quot;&#39;商家公告&#39;&quot;&gt;&lt;/lineTitle&gt;
</code></pre>
<p>这是因为绑定的子组件中的title是一个String类型的，所以<code>:title=&quot;&quot;</code>里面也得是一个String类型的。</p>
<h3 id="文件别名alias"><a href="#文件别名alias" class="headerlink" title="文件别名alias"></a>文件别名<code>alias</code></h3><p>位置在：<code>webpack.base.conf.js/reslove{&#39;alias&#39;}</code></p>
<h3 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a><code>v-for</code></h3><p>for之后的 a in b, 需要加上空格</p>
<pre><code class="vue">//right
&lt;li class=&quot;support-item&quot; v-for=&quot;(item,index) in seller.supports&quot; :key=&quot;index&quot;&gt;
//wrong
&lt;li class=&quot;support-item&quot; v-for=&quot;(item,index)in seller.supports&quot; :key=&quot;index&quot;&gt;
</code></pre>
<h3 id="api调用"><a href="#api调用" class="headerlink" title="api调用"></a>api调用</h3><pre><code class="javascript">computed(){
    this.$http.get(&#39;/api/goods&#39;).then((res) =&gt; {
        res = res.body
        if (res.errno === ERR_OK) {
          this.goods = res.data
        }
      })
}
</code></pre>
<h3 id="margin重叠"><a href="#margin重叠" class="headerlink" title="margin重叠"></a><code>margin</code>重叠</h3><p>外边距会重叠起来，因此不会变成想象中两倍的距离。</p>
<h3 id="ref-绑定DOM"><a href="#ref-绑定DOM" class="headerlink" title="ref 绑定DOM"></a>ref 绑定DOM</h3><p>v-ref、v-el 弃用 统一使用ref属性为元素或组件添加标记，然后通过this.$refs获取。<br>开始我用:<br><code>&lt;div class=&quot;menu-wrapper&quot; ref=&quot;menu-wrapper&quot;&gt;</code><br>来绑定dom对象，然而浏览器报错vue.esm.js?65d7:434 [Vue warn]: Error in nextTick: “TypeError: Cannot read property ‘children’ of undefined”，在经过多次修改后，发现<br><code>&lt;div class=&quot;menu-wrapper&quot; ref=&quot;menuWrapper&quot;&gt;</code><br>将ref里“-”去掉，就不会报错了，应该是修改了命名规则吧。</p>
<h3 id="圆形图标"><a href="#圆形图标" class="headerlink" title="圆形图标"></a>圆形图标</h3><p><code>border-radius 50%</code></p>
<h3 id="border-box模型"><a href="#border-box模型" class="headerlink" title="border-box模型"></a>border-box模型</h3><p>看看这个<a href="https://www.jianshu.com/p/006a422afb8e" target="_blank" rel="noopener">链接</a></p>
<h3 id="props"><a href="#props" class="headerlink" title="props"></a>props</h3><p><code>props</code>接受来自父组件的值，也就是<code>props</code>写在子组件的<code>&lt;script&gt;</code>里面，接受父组件<code>v-bind</code>过来的信息。</p>
<h3 id="函数柯里化"><a href="#函数柯里化" class="headerlink" title="函数柯里化"></a>函数柯里化</h3><p><a href="https://www.cnblogs.com/pigtail/p/3447660.html" target="_blank" rel="noopener">link</a></p>
<p>在计算机科学中，柯里化（英语：Currying），又译为卡瑞化或加里化，是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。这个技术由 Christopher Strachey 以逻辑学家哈斯凯尔·加里命名的，尽管它是 Moses Schönfinkel 和 Gottlob Frege 发明的。</p>
<p>这是来自维基百科的名词解释。顾名思义，柯里化其实本身是固定一个可以预期的参数，并返回一个特定的函数，处理批特定的需求。这增加了函数的适用性，但同时也降低了函数的适用范围</p>
<h3 id="反引号"><a href="#反引号" class="headerlink" title="反引号"></a>反引号</h3><p>可以比较方便的拼接字符串。</p>
<pre><code class="es6">`还差￥${diff}元起送`
</code></pre>
<h3 id="计算属性判断对应的样式"><a href="#计算属性判断对应的样式" class="headerlink" title="计算属性判断对应的样式"></a>计算属性判断对应的样式</h3><pre><code class="vue">&lt;div class=&quot;pay&quot; :class=&quot;payClass&quot;&gt;{{payDesc}}&lt;/div&gt;

&lt;script&gt;
      payClass () {
        if (this.totalPrice &lt; this.minPrice) {
          return &#39;not-enough&#39;
        } else {
          return &#39;enough&#39;
        }
      }
&lt;/script&gt;

&lt;style&gt;
  &amp;.not-enough
    background: #2b333b
  &amp;.enough
    background: #00b43c
    color: #fff
&lt;/style&gt;
</code></pre>
<h3 id="如何在vue里面使用stylus"><a href="#如何在vue里面使用stylus" class="headerlink" title="如何在vue里面使用stylus"></a>如何在vue里面使用stylus</h3><pre><code>npm install stylus

// in project

npm install stylus --save-dev
npm install stylus-loader --save-dev

// in .vue 

&lt;style lang=&quot;stylus&quot;&gt;
&lt;/style&gt;
</code></pre><h3 id="translate3d"><a href="#translate3d" class="headerlink" title="translate3d()"></a><code>translate3d()</code></h3><p>样式里面的参数代表着移动的距离</p>
<p>与transition里面的<code>tranform</code>配合，可以形成动画切换的效果。</p>
<p><a href="https://www.cnblogs.com/xiaohuochai/p/5351477.html" target="_blank" rel="noopener">ref</a></p>
<h3 id="在图片加载之前为其预留位置，防止页面抖动"><a href="#在图片加载之前为其预留位置，防止页面抖动" class="headerlink" title="在图片加载之前为其预留位置，防止页面抖动"></a>在图片加载之前为其预留位置，防止页面抖动</h3><p>这样图片位置通过<code>padding</code>就留出来了。</p>
<pre><code class="stylus">.img-header
      position relative
      width 100%
      height 0
      padding-top 100%
</code></pre>
<h3 id="添加动画来修复food-vue中小球的动画"><a href="#添加动画来修复food-vue中小球的动画" class="headerlink" title="添加动画来修复food.vue中小球的动画"></a>添加动画来修复<code>food.vue</code>中小球的动画</h3><p>给<code>cartcontrol</code>上的按钮添加一个渐隐效果，可以使得计算小球飞出的位置时，能够找到出发的起始点。</p>
<p>不然点击之后按钮消失，<code>cartcontrol</code>就失去了对位置的检测。</p>
<h3 id="阻止冒泡"><a href="#阻止冒泡" class="headerlink" title="阻止冒泡"></a>阻止冒泡</h3><pre><code class="vue">@click.stop.prevent=&quot;decreaseCart&quot;
</code></pre>
<h3 id="Better-scroll"><a href="#Better-scroll" class="headerlink" title="Better-scroll"></a>Better-scroll</h3><p>使用better-scroll的时候，需要将全部的需要滚动的DOM元素包含到对应的DIV里面去。</p>
<pre><code class="vue">&lt;template&gt;
  &lt;!--里面都是待滚动的元素--&gt;
  &lt;div ref=&quot;scroll&quot;&gt;
    &lt;slot&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>

          </div>
          <br><br>
          <div>
              <p>
                       
                      <span class="badge badge-default">#&nbsp;Vue</span>
                      &nbsp;
                      
              </p>
          </div>
        </div>
      </div>  
    </div>
  </div>
  <!-- TOC -->
  
  <div id="toc">
    <p class="toc-title"><i class="material-icons" style="vertical-align:middle">toc</i>Toc:</p> 
    <div id="tocbot"></div>
  </div>

</div>


<br>
<!-- Comments -->
<div class="comments" id="comments">

    
    <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    <script>               
        var disqus_shortname = '';
        var disqus_config = function () {
            this.page.url = 'http://yoursite.com/2019/01/10/饿了么App笔记/'; 
            this.page.identifier = '/2019/01/10/饿了么App笔记/';
        };
        (function() { 
            var d = document, s = d.createElement('script');
            s.type = 'text/javascript';
            s.src = '//'+disqus_shortname+'.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>                                
</div>

</div>
  

<footer class="footer footer-default">
        <div class="container">
          <div class="float-left" style="padding: 15px 0;">
              <b>一日看尽长安花</b>
          </div>
          <div class="copyright float-right">
            &copy;
            <script>
              document.write(new Date().getFullYear())
            </script>&nbsp;<a href="https://hexo.io/zh-cn/" target="_blank">HEXO</a>&nbsp;<i class="material-icons">favorite_border</i>
            <a href="https://github.com/invom/Material-T" target="_blank">Material-T</a>
          </div>
        </div>
</footer>
      <!--   Core JS Files   -->
      <script src="/js/core/jquery.min.js?v=3.2.1"></script>
      <script src="/js/main.js"></script>
      <script src="/js/core/popper.min.js"></script>
      <script src="/js/core/bootstrap-material-design.min.js"></script>
      <script src="/js/plugins/moment.min.js"></script>
      <!-- Control Center for Material Kit: parallax effects, scripts for the example pages etc -->
      <script src="/js/material-kit.min.js?v=2.0.5"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
        <script src="/js/post.js"></script>
        <script src="/js/plugins/prettify.js"></script>
        <script>
            $(document).ready(function(){
                $('pre').addClass('prettyprint linenums');
                prettyPrint();
            })
        </script>
      
</body>
</html>